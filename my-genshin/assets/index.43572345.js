var W=Object.defineProperty;var D=Object.getOwnPropertySymbols;var V=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable;var X=(t,e,o)=>e in t?W(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o,T=(t,e)=>{for(var o in e||(e={}))V.call(e,o)&&X(t,o,e[o]);if(D)for(var o of D(e))P.call(e,o)&&X(t,o,e[o]);return t};import{E as H,F as M,r as E,a as S,b as Y,c as Q,d as ee,e as x,f as p,g as k,w as C,u as J,s as te,h as le,i as F,v as I,j as oe,t as b,k as L,l as G,m as ae,o as z,n as m,p as se,q as ne,x as re,U as ce,y as ie,z as he,A as de,B as ue}from"./vendor.50080eb5.js";const pe=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))c(l);new MutationObserver(l=>{for(const a of l)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&c(s)}).observe(document,{childList:!0,subtree:!0});function o(l){const a={};return l.integrity&&(a.integrity=l.integrity),l.referrerpolicy&&(a.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?a.credentials="include":l.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function c(l){if(l.ep)return;l.ep=!0;const a=o(l);fetch(l.href,a)}};pe();const N={set(t,e){if(e===void 0)throw new Error("undefined\u6570\u636E\u4E0D\u80FD\u4FDD\u5B58");return this.storage.setItem(t,JSON.stringify(e)),!0},get(t){if(this.storage.getItem(t))return JSON.parse(this.storage.getItem(t))},getAll(){let t=this.storage.valueOf(),e={};for(const o in t)Object.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},has(t){return this.get(t)!==void 0},remove(t){this.storage.removeItem(t)},clear(){this.storage.clear()}},fe={local:T({storage:window.localStorage},N),session:T({storage:window.sessionStorage},N)},{local:q,session:Ie}=fe,_e="proxy/getConfigList",ge="proxy/getGachaLog",ye="https://webstatic.mihoyo.com/hk4e/event/e20190909gacha/index.html?authkey_ver=1&sign_type=2&auth_appid=webview_gacha&init_type=301&gacha_id=511f33032f12c85d8f8092341cba68c312b512&timestamp=1644969002&lang=zh-cn&device_type=mobile&ext=%7b%22loc%22%3a%7b%22x%22%3a2367.802734375%2c%22y%22%3a233.07395935058595%2c%22z%22%3a-786.7781982421875%7d%2c%22platform%22%3a%22IOS%22%7d&game_version=CNRELiOS2.5.0_R6089080_S6203745_D6166983&plat_type=ios&region=cn_gf01&authkey=nf22r%2bd%2bKUqNqdBZSz6zM2FEKJ3R3b5pjG5PwoXio6BFaIVDxe6c5pDnqRFYdMi4OUEynmI0txzyuLUrdgwp%2bravJe0f3zKZdR4uluQnUB5tSFa4TYD%2fRJ0wgsxTMIz%2fnhWjTTtLRhR7UGDXi5p3s9S60QiDOGCcAwmK5qg1UrzTrMRq7R4XNnsqOqCBwpzg5rxjXHTJz5j6AIVVmfV6kj%2bzdy75OHe9umz6%2bE7EPeVXJmdPStOZuIBY%2b9LFXFt19ZvbBkH9I%2fNCSidqL7%2fB88d%2fpTFGQTCDVYSUW8AfdMzELEWUN8RIv4qN1BZj60QFqlgDROx7JurzH9mr2nGJqagHEHQXsDm3nz1jyYnuWkZ6lwwbEMg2kNA%2bnDWp9f%2fYrzYUeOGpB5Yctqx3N89vl7xAenkhWnJ%2bZizkHK7wpk%2flxIJr%2fOe%2fNmX6sTY4kRfhTMI55tUsny8uX%2bMwO8UfVJXsXXFF8hTTZF28rj%2frJsqmCvDHS4UmkAW13OscwZESw2Hq9yK0hEB58EsIrBqIeJ6XiQ4qv5js%2fA3oxgBITZv5FRnN3Ou0Liq%2brjcN5dQn7B6Wu7KNVg4qrkKveXTLPLXezJXB1lyMOx6kzd6YLHMlS%2bTjz7DmLH%2fw6iJsSzetM1FdQEXinNbbM9ASCR0T7nyUIaNAF7oGoT%2fHJPDRmeiJITjGJzM0mLVBUHW1kCmYU4GxSEasdBCZSod2fPBifofm7J1nOLKh6iPQNgcRozFRhKpOkH%2fEu6L9cCChXGBHiUAmc8UzGlXqKeaQ29%2bFBTpeS2Byc%2fcKBq6PklsWsBXamADjqVudCsGY87uJLCfgapkGmPZ4XtXFy5z8pYdKhoNDbkX1JVdCd%2bJ5gVaKu4MniL3BqkFZoaezC6Zu%2fgF5QZKuBliflq0g9eyXyZAQj7QR%2f%2byMnjej1YsKQPiYH4tWZgHIJrJwZcZ3tBYKE8JFRHZqRV6JWKCKIsuZZ8JRO3xugcv2iIDJWrvjVKNXZRKaDJvqgqetN4pRGDnPCRCP&game_biz=hk4e_cn",be=(t,e,o,c,l,a)=>fetch(ge+`?authkey=${c}&authkey_ver=${l}&lang=${a}&gacha_type=${t}&page=${e}&size=${20}&end_id=${o}`,{credentials:"include"}).then(s=>s.json()).then(s=>s),me=(t,e,o)=>fetch(`${_e}?authkey=${t}&authkey_ver=${e}&lang=${o}`,{credentials:"include"}).then(c=>c.json()).then(c=>c.data.gacha_type_list),ve=t=>new Promise(e=>{setTimeout(e,t*1e3)}),we=t=>{const e=t||[];if(!e||e===void 0)return;let o=[],c=[],l=[],a=[],s=[];for(let _=0;_<e.length;_++){let g=e[_];switch(g[3]){case 3:s.push(g);break;case 4:g[2]==="\u89D2\u8272"?l.push(g):a.push(g);break;case 5:g[2]==="\u89D2\u8272"?o.push(g):c.push(g);break;default:console.log("\u5224\u65AD\u51FA\u9519");break}}const d=e.length;let v="-";if(d){const _=e[d-1];_[5]&&(v=_[5]||0)}return{level_5_role:o,level_5_weapons:c,level_4_role:l,level_4_weapons:a,level_3_Weapons:s,total:d,noGoldTimes:v,probability:[{title:"\u4E09\u661F\u6B66\u5668",chance:O(s.length/e.length)},{title:"\u56DB\u661F\u6B66\u5668",chance:O(a.length/e.length)},{title:"\u56DB\u661F\u89D2\u8272",chance:O(l.length/e.length)},{title:"\u4E94\u661F\u89D2\u8272",chance:O(o.length/e.length)}]}},O=t=>t?Math.round(t*1e4)/100+"%":"-",ke={"200":"\u5E38\u9A7B\u7948\u613F","100":"\u65B0\u624B\u7948\u613F","301":"\u89D2\u8272\u6D3B\u52A8\u7948\u613F","302":"\u6B66\u5668\u6D3B\u52A8\u7948\u613F"},R=t=>ke[t],xe=t=>{const e=new H.Workbook;for(const l in t)if(Object.hasOwnProperty.call(t,l)){const a=t[l];console.log(l,R(l));const s=e.addWorksheet(title(l),{views:[{state:"frozen",ySplit:1}]});s.columns=[{header:"\u65F6\u95F4",key:"time",width:24},{header:"\u540D\u79F0",key:"name",width:14},{header:"\u7C7B\u522B",key:"type",width:8},{header:"\u661F\u7EA7",key:"rank",width:8},{header:"\u603B\u6B21\u6570",key:"idx",width:8},{header:"\u4FDD\u5E95\u5185",key:"pdx",width:8}],s.addRows(a),["A","B","C","D","E","F"].forEach(d=>{s.getCell(`${d}1`).border={top:{style:"thin",color:{argb:"ffc4c2bf"}},left:{style:"thin",color:{argb:"ffc4c2bf"}},bottom:{style:"thin",color:{argb:"ffc4c2bf"}},right:{style:"thin",color:{argb:"ffc4c2bf"}}},s.getCell(`${d}1`).fill={type:"pattern",pattern:"solid",fgColor:{argb:"ffdbd7d3"}},s.getCell(`${d}1`).font={name:"\u5FAE\u8F6F\u96C5\u9ED1",color:{argb:"ff757575"},bold:!0}}),a.forEach((d,v)=>{["A","B","C","D","E","F"].forEach(_=>{s.getCell(`${_}${v+2}`).border={top:{style:"thin",color:{argb:"ffc4c2bf"}},left:{style:"thin",color:{argb:"ffc4c2bf"}},bottom:{style:"thin",color:{argb:"ffc4c2bf"}},right:{style:"thin",color:{argb:"ffc4c2bf"}}},s.getCell(`${_}${v+2}`).fill={type:"pattern",pattern:"solid",fgColor:{argb:"ffebebeb"}};const g={3:"ff8e8e8e",4:"ffa256e1",5:"ffbd6932"};s.getCell(`${_}${v+2}`).font={name:"\u5FAE\u8F6F\u96C5\u9ED1",color:{argb:g[d[3]]},bold:d[3]!="3"}})})}const c=`\u539F\u795E\u62BD\u5361\u8BB0\u5F55\u5BFC\u51FA_${new Date().getTime()}.xlsx`;e.xlsx.writeBuffer().then(l=>{M(new Blob([l],{type:"application/octet-stream"}),c+".xlsx")})};var ze=(t,e)=>{const o=t.__vccOpts||t;for(const[c,l]of e)o[c]=l;return o};const Ce={class:"search"},Be=m("\u67E5\u8BE2"),Ee=m("\u5BFC\u5165\u672C\u5730\u6570\u636E"),Oe=m("\u5BFC\u51FAExcel\u8868\u683C"),Te={class:"text"},Se={class:"schart"},Je={class:"schart-box"},Le={class:"text-box"},Ge=m(" \u53D1\u6CA1\u51FA\u91D1 "),qe={class:""},Re={class:"chart-box"},$e={setup(t){const e=E(!1),o=E(""),c=E(""),l=E(S([]));let a="",s="1",d="zh-cn";S({level_3_Weapons:[],level_4_role:[],level_4_weapons:[],level_5_role:[],total:0,noGoldTimes:0,probability:[]});const v=async(i,y)=>{let r=1,n=[],f=[],w="0",h=[];do c.value=`\u6B63\u5728\u83B7\u53D6${i}\u7B2C${r}\u9875`,f=await be(y,r,w,a,s,d),await ve(1),w=f.data.list.length>0?f.data.list[f.data.list.length-1].id:0,h=f.data.list,n.push(...h),r+=1;while(h.length>0);return n},_=async i=>{if(i=i?new URL(i):new URL(ye),a=i.searchParams.get("authkey"),!a){console.error("AuthKey \u83B7\u53D6\u5931\u8D25!"),se.warning("\u5730\u5740\u4E0D\u6B63\u786E\uFF0CAuthKey \u83B7\u53D6\u5931\u8D25!");return}a.includes("/")&&(a=encodeURIComponent(a)),s=i.searchParams.get("authkey_ver")||"1",d=i.searchParams.get("lang")||"zh-cn";const y=await me(a,s,d);c.value="\u5F00\u59CB\u83B7\u53D6\u62BD\u5361\u8BB0\u5F55";let r={};for(const n of y){let f=n.key;const w=(await v(n.name,n.key)).map(u=>[u.time,u.name,u.item_type,parseInt(u.rank_type)]);w.reverse();let h=0,B=0;for(let u of w)h+=1,B+=1,u.push(h,B),u[3]===5&&(B=0);r[f]=w}console.log("\u83B7\u53D6\u62BD\u5361\u8BB0\u5F55\u7ED3\u675F"),c.value="\u83B7\u53D6\u62BD\u5361\u8BB0\u5F55\u5B8C\u6210",$(r),q.set("GachDataObj",r)},g=()=>{_(o.value)},K=()=>{let i=q.get("GachDataObj");i&&$(i)},$=i=>{e.value=!0,Object.keys(i).forEach((y,r)=>{const n=U(i[y],y);l.value.push(n)})},U=(i,y)=>{const r=S({title:"",level_3_Weapons:[],level_4_role:[],level_4_weapons:[],level_5_role:[],total:0,noGoldTimes:0,probability:[]});let n=we(i);r.title=R(y),r.level_3_Weapons.push(...n.level_3_Weapons),r.level_4_role.push(...n.level_4_role),r.level_4_weapons.push(...n.level_4_weapons),r.level_5_role.push(...n.level_5_role),r.total=n.total,r.noGoldTimes=n.noGoldTimes,r.probability.push(...n.probability);let f={title:{text:R(y)},tooltip:{},series:[{name:"\u6570\u91CF",type:"pie",data:[{value:n.level_3_Weapons.length,name:"\u4E09\u661F\u6B66\u5668",itemStyle:{color:"skyblue"}},{value:n.level_4_role.length,name:"\u56DB\u661F\u89D2\u8272",itemStyle:{color:"#9b75b2"}},{value:n.level_4_weapons.length,name:"\u56DB\u661F\u6B66\u5668",itemStyle:{color:"#9b75b2"}},{value:n.level_5_role.length,name:"\u4E94\u661F\u89D2\u8272",itemStyle:{color:"#d68d4d"}}]}],radius:"50%",center:["50%","50%"]};return r.options=f,r},A=()=>{console.log("\u5BFC\u51FA\u8868\u683C\u6570\u636E");let i=q.get("GachDataObj");xe(i)};return(i,y)=>{const r=Y,n=Q,f=ee,w=ae("v-chart");return z(),x("div",null,[p("header",null,[p("div",Ce,[k(r,{modelValue:o.value,"onUpdate:modelValue":y[0]||(y[0]=h=>o.value=h),size:"small",class:"url",placeholder:"\u62BD\u5956\u5730\u5740:\u5982:https://webstatic.mihoyo.com/XXX"},null,8,["modelValue"]),k(n,{class:"button",color:"#626aef",size:"small",style:{color:"white"},onClick:g,id:"",icon:J(te)},{default:C(()=>[Be]),_:1},8,["icon"]),k(n,{class:"button",color:"#626aef",size:"small",style:{color:"white"},onClick:K,id:"",icon:J(le)},{default:C(()=>[Ee]),_:1},8,["icon"]),F(k(n,{class:"button",color:"#626aef",size:"small",style:{color:"white"},onClick:A,icon:J(oe)},{default:C(()=>[Oe]),_:1},8,["icon"]),[[I,e.value]])])]),p("div",Te,b(c.value),1),F(p("div",Se,[(z(!0),x(L,null,G(l.value,(h,B)=>(z(),x("div",{key:B},[p("h3",null,b(h.title),1),p("div",Je,[p("div",Le,[p("p",null,[m(" \u62BD\u53D6\u6B21\u6570:"+b(h.total)+",\u76EE\u524D\u5DF2\u62BD ",1),k(f,null,{default:C(()=>[m(b(h.noGoldTimes),1)]),_:2},1024),Ge]),p("p",null,[m(" \u4E94\u661F\u89D2\u8272\u6B21\u6570:"+b(h.level_5_role.length)+" ",1),(z(!0),x(L,null,G(h.level_5_role,u=>(z(),x("span",{key:u[0]},[k(f,{type:"success",class:"tag"},{default:C(()=>[m(b(`${u[1]}(${u[5]})`),1)]),_:2},1024)]))),128))]),p("p",null,"\u56DB\u661F\u89D2\u8272\u6B21\u6570:"+b(h.level_4_role.length),1),p("p",null,"\u56DB\u661F\u6B66\u5668\u6B21\u6570:"+b(h.level_4_weapons.length),1),p("p",null,"\u4E09\u661F\u6B66\u5668\u6B21\u6570:"+b(h.level_3_Weapons.length),1),p("ul",qe,[(z(!0),x(L,null,G(h.probability,(u,Z)=>(z(),x("li",{key:Z},[m(b(u.title)+": ",1),k(f,null,{default:C(()=>[m(b(u.chance),1)]),_:2},1024)]))),128))])]),p("div",Re,[k(w,{class:"chart",option:h.options,autoresize:""},null,8,["option"])])])]))),128))],512),[[I,e.value]])])}}};var De=ze($e,[["__scopeId","data-v-2032e02e"]]);ne([ie,he,de,ue]);const j=re(De);j.component("v-chart",ce);j.mount("#app");
